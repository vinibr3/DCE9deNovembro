(function(){window.active_admin_jcrop={start:function(){var o;$(".crop_modal_open").length&&($(".crop_modal_open").click(function(){var t,e,n;t=$(this).parent().find(".crop_modal_content").clone(),e=t.find("img.cropping_image"),active_admin_jcrop.buttons_text={save_cropped_image:e.data("translateSaveCroppedImage"),cancel:e.data("translateCancel")},active_admin_jcrop.cropper={object_class:e.data("objectClass"),object_id:e.data("objectId"),crop_field:e.data("cropField"),jcropper_url:e.data("jcropperUrl")},$(t).appendTo("body").dialog({width:t.width(),height:t.height()+100,modal:!0,position:{my:"center",at:"center",of:window},buttons:[{text:active_admin_jcrop.buttons_text.save_cropped_image,click:function(){var o;return o=active_admin_jcrop.cropper,$.ajax({type:"PUT",url:o.jcropper_url,data:{image_data:o},error:function(){return alert("There was an error while cropping the image")}},$(this).dialog("close"))}},{text:active_admin_jcrop.buttons_text.cancel,click:function(){return $(this).dialog("close").remove()}}]}),n=$.extend({},e.data("jcropOptions")),n.onSelect=function(n){var a;o(n),e.data("jcropOptions").showDimensions&&t.find(".crop_modal_dimensions").first().text(n.w+"x"+n.h),(a=e.data("jcropOptions").onSelect)&&("string"==typeof a?window[a](n):"function"==typeof a&&a(n))},n.onChange=function(n){var a;o(n),e.data("jcropOptions").showDimensions&&t.find(".crop_modal_dimensions").first().text(n.w+"x"+n.h),(a=e.data("jcropOptions").onChange)&&("string"==typeof a?window[a](n):"function"==typeof a&&a(n))},n.onRelease=function(){var o;(o=e.data("jcropOptions").onRelease)&&("string"==typeof o?window[o](coords):"function"==typeof o&&o(coords))},e.Jcrop(n)}),o=function(o){active_admin_jcrop.cropper.crop_x=o.x,active_admin_jcrop.cropper.crop_y=o.y,active_admin_jcrop.cropper.crop_w=o.w,active_admin_jcrop.cropper.crop_h=o.h})}},$(function(){return active_admin_jcrop.start()})}).call(this);